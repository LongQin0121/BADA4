<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MPCç³»ç»Ÿæ¶æ„è¯¦è§£</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.3);
        }
        
        h1 {
            text-align: center;
            font-size: 2.5em;
            margin-bottom: 30px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .diagram-container {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            padding: 30px;
            margin: 20px 0;
            color: #333;
            box-shadow: 0 4px 16px rgba(0,0,0,0.2);
        }
        
        .mpc-diagram {
            display: grid;
            grid-template-columns: 1fr 2fr 1fr;
            grid-template-rows: auto auto auto;
            gap: 20px;
            align-items: center;
            margin: 30px 0;
        }
        
        .component {
            background: linear-gradient(145deg, #f0f4f8, #d6e8f5);
            border: 2px solid #4a90e2;
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            position: relative;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(74, 144, 226, 0.2);
        }
        
        .component:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 24px rgba(74, 144, 226, 0.3);
        }
        
        .optimizer {
            background: linear-gradient(145deg, #ffd89b, #19547b);
            color: white;
            grid-column: 2;
            grid-row: 1;
            font-weight: bold;
        }
        
        .plant {
            background: linear-gradient(145deg, #a8e6cf, #56ab2f);
            color: white;
            grid-column: 2;
            grid-row: 3;
            font-weight: bold;
        }
        
        .reference {
            background: linear-gradient(145deg, #ffb3ba, #ff6b6b);
            color: white;
            grid-column: 1;
            grid-row: 2;
        }
        
        .output {
            background: linear-gradient(145deg, #c7cedb, #667eea);
            color: white;
            grid-column: 3;
            grid-row: 2;
        }
        
        .measurements {
            background: linear-gradient(145deg, #dcedc1, #42b883);
            color: white;
            grid-column: 2;
            grid-row: 2;
            font-size: 0.9em;
        }
        
        .arrow {
            width: 0;
            height: 0;
            border-style: solid;
            position: absolute;
        }
        
        .arrow-right {
            border-left: 15px solid #4a90e2;
            border-top: 10px solid transparent;
            border-bottom: 10px solid transparent;
            right: -17px;
            top: 50%;
            transform: translateY(-50%);
        }
        
        .arrow-down {
            border-top: 15px solid #4a90e2;
            border-left: 10px solid transparent;
            border-right: 10px solid transparent;
            bottom: -17px;
            left: 50%;
            transform: translateX(-50%);
        }
        
        .arrow-up {
            border-bottom: 15px solid #4a90e2;
            border-left: 10px solid transparent;
            border-right: 10px solid transparent;
            top: -17px;
            left: 50%;
            transform: translateX(-50%);
        }
        
        .detail-section {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            color: #333;
            box-shadow: 0 4px 16px rgba(0,0,0,0.1);
        }
        
        .detail-section h3 {
            color: #4a90e2;
            border-bottom: 2px solid #4a90e2;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }
        
        .code-block {
            background: #2d3748;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            overflow-x: auto;
            margin: 15px 0;
            border-left: 4px solid #4a90e2;
        }
        
        .highlight {
            background: rgba(74, 144, 226, 0.1);
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #4a90e2;
            margin: 15px 0;
        }
        
        .grid-2 {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }
        
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        
        .comparison-table th,
        .comparison-table td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }
        
        .comparison-table th {
            background-color: #4a90e2;
            color: white;
        }
        
        .comparison-table tr:nth-child(even) {
            background-color: #f2f2f2;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ¯ MPCç³»ç»Ÿæ¶æ„è¯¦è§£</h1>
        
        <div class="diagram-container">
            <h2 style="text-align: center; color: #4a90e2; margin-bottom: 30px;">MPCæ§åˆ¶ç³»ç»Ÿæ¡†å›¾</h2>
            
            <div class="mpc-diagram">
                <div class="component optimizer">
                    <strong>ä¼˜åŒ–å™¨ (Optimizer)</strong><br>
                    â€¢ ç›®æ ‡å‡½æ•° (Objectives)<br>
                    â€¢ ç³»ç»Ÿæ¨¡å‹ (Model)<br>
                    â€¢ çº¦æŸæ¡ä»¶ (Constraints)
                    <div class="arrow arrow-down"></div>
                </div>
                
                <div class="component reference">
                    <strong>å‚è€ƒè¾“å…¥</strong><br>
                    (Reference)
                    <div class="arrow arrow-right"></div>
                </div>
                
                <div class="component measurements">
                    <strong>æµ‹é‡åé¦ˆ</strong><br>
                    (Measurements)<br>
                    ä¼ æ„Ÿå™¨æ•°æ®
                    <div class="arrow arrow-up"></div>
                </div>
                
                <div class="component output">
                    <strong>ç³»ç»Ÿè¾“å‡º</strong><br>
                    (Output)
                </div>
                
                <div class="component plant">
                    <strong>è¢«æ§å¯¹è±¡ P(s)</strong><br>
                    (Plant)
                    <div class="arrow arrow-right"></div>
                </div>
            </div>
        </div>
        
        <div class="detail-section">
            <h3>ğŸ”§ å„ç»„ä»¶è¯¦ç»†åŠŸèƒ½</h3>
            
            <div class="grid-2">
                <div>
                    <h4>ğŸ“Š ä¼˜åŒ–å™¨ (Optimizer)</h4>
                    <div class="highlight">
                        <strong>æ ¸å¿ƒåŠŸèƒ½ï¼š</strong><br>
                        â€¢ æ¥æ”¶å½“å‰çŠ¶æ€å’Œå‚è€ƒä¿¡å·<br>
                        â€¢ åŸºäºç³»ç»Ÿæ¨¡å‹é¢„æµ‹æœªæ¥è¡Œä¸º<br>
                        â€¢ åœ¨çº¦æŸæ¡ä»¶ä¸‹ä¼˜åŒ–ç›®æ ‡å‡½æ•°<br>
                        â€¢ è¾“å‡ºæœ€ä¼˜æ§åˆ¶åºåˆ—
                    </div>
                    
                    <div class="code-block">
def mpc_optimizer():
    # æ„å»ºä¼˜åŒ–é—®é¢˜
    minimize: Î£(x[k]-ref[k])Â² + RÂ·u[k]Â²
    subject to:
        x[k+1] = AÂ·x[k] + BÂ·u[k]  # æ¨¡å‹
        u_min â‰¤ u[k] â‰¤ u_max      # çº¦æŸ
    
    return optimal_control_sequence
                    </div>
                </div>
                
                <div>
                    <h4>ğŸ­ è¢«æ§å¯¹è±¡ (Plant)</h4>
                    <div class="highlight">
                        <strong>çœŸå®ç³»ç»Ÿï¼š</strong><br>
                        â€¢ æ¥æ”¶æ§åˆ¶è¾“å…¥<br>
                        â€¢ äº§ç”Ÿå®é™…å“åº”<br>
                        â€¢ å¯èƒ½å­˜åœ¨å¹²æ‰°å’Œä¸ç¡®å®šæ€§<br>
                        â€¢ è¾“å‡ºå¯æµ‹é‡çš„ä¿¡å·
                    </div>
                    
                    <div class="code-block">
# çœŸå®ç³»ç»Ÿå¯èƒ½æ˜¯ï¼š
- æ±½è½¦åŠ¨åŠ›å­¦
- åŒ–å·¥ååº”å™¨  
- æ— äººæœºé£è¡Œå™¨
- å»ºç­‘HVACç³»ç»Ÿ
- æœºå™¨äººå…³èŠ‚
                    </div>
                </div>
            </div>
        </div>
        
        <div class="detail-section">
            <h3>ğŸ”„ MPCæ§åˆ¶å¾ªç¯</h3>
            
            <div class="code-block">
while system_running:
    # 1. æµ‹é‡å½“å‰çŠ¶æ€ (Measurements)
    current_state = sensor.get_data()
    
    # 2. è·å–å‚è€ƒä¿¡å· (Reference)  
    reference = get_setpoint()
    
    # 3. ä¼˜åŒ–å™¨æ±‚è§£ (Optimizer)
    optimal_controls = solve_mpc(
        current_state=current_state,
        reference=reference,
        model=system_model,
        constraints=system_constraints,
        objectives=performance_objectives
    )
    
    # 4. æ‰§è¡Œç¬¬ä¸€ä¸ªæ§åˆ¶åŠ¨ä½œ
    plant.apply_control(optimal_controls[0])
    
    # 5. ç­‰å¾…ä¸‹ä¸€ä¸ªæ§åˆ¶å‘¨æœŸ
    wait(sample_time)
    
    # 6. é‡å¤å¾ªç¯ (æ»šåŠ¨ä¼˜åŒ–)
            </div>
        </div>
        
        <div class="detail-section">
            <h3>âš™ï¸ ä¸‰å¤§æ ¸å¿ƒè¦ç´ </h3>
            
            <table class="comparison-table">
                <thead>
                    <tr>
                        <th>è¦ç´ </th>
                        <th>ä½œç”¨</th>
                        <th>æ•°å­¦è¡¨è¾¾</th>
                        <th>å®é™…ä¾‹å­</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>ç›®æ ‡å‡½æ•°<br>(Objectives)</strong></td>
                        <td>å®šä¹‰ä¼˜åŒ–ç›®æ ‡</td>
                        <td>min Î£[Q(x-r)Â² + RuÂ²]</td>
                        <td>æœ€å°åŒ–è·Ÿè¸ªè¯¯å·®<br>+ æ§åˆ¶èƒ½è€—</td>
                    </tr>
                    <tr>
                        <td><strong>ç³»ç»Ÿæ¨¡å‹<br>(Model)</strong></td>
                        <td>é¢„æµ‹æœªæ¥çŠ¶æ€</td>
                        <td>x[k+1] = f(x[k], u[k])</td>
                        <td>è½¦è¾†åŠ¨åŠ›å­¦æ–¹ç¨‹<br>ä¼ çƒ­ä¼ è´¨æ–¹ç¨‹</td>
                    </tr>
                    <tr>
                        <td><strong>çº¦æŸæ¡ä»¶<br>(Constraints)</strong></td>
                        <td>é™åˆ¶å¯è¡Œè§£</td>
                        <td>g(x,u) â‰¤ 0</td>
                        <td>é€Ÿåº¦é™åˆ¶<br>æ¸©åº¦èŒƒå›´</td>
                    </tr>
                </tbody>
            </table>
        </div>
        
        <div class="detail-section">
            <h3>ğŸ¯ MPC vs ä¼ ç»Ÿæ§åˆ¶</h3>
            
            <div class="grid-2">
                <div>
                    <h4>ä¼ ç»ŸPIDæ§åˆ¶</h4>
                    <div class="code-block">
Reference â†’ [PIDæ§åˆ¶å™¨] â†’ Plant â†’ Output
              â†‘                    â†“
              â†â”€â”€ Error â† [æµ‹é‡] â†â”€â”€
                    
ç‰¹ç‚¹ï¼š
â€¢ ç®€å•å¿«é€Ÿ
â€¢ åŸºäºè¯¯å·®åé¦ˆ  
â€¢ éš¾å¤„ç†çº¦æŸ
â€¢ å•å˜é‡ç³»ç»Ÿ
                    </div>
                </div>
                
                <div>
                    <h4>MPCæ§åˆ¶</h4>
                    <div class="code-block">
Reference â†’ [MPCä¼˜åŒ–å™¨] â†’ Plant â†’ Output
    â†“         â†‘    â†‘             â†“
    Model  Constraints      Measurements
              
ç‰¹ç‚¹ï¼š  
â€¢ é¢„æµ‹æ€§æ§åˆ¶
â€¢ å¤šå˜é‡ç³»ç»Ÿ
â€¢ å¤©ç„¶å¤„ç†çº¦æŸ
â€¢ åŸºäºä¼˜åŒ–
                    </div>
                </div>
            </div>
        </div>
        
        <div class="detail-section">
            <h3>ğŸ’¡ å…³é”®ä¼˜åŠ¿</h3>
            
            <div class="highlight">
                <strong>ğŸ”® é¢„æµ‹èƒ½åŠ›ï¼š</strong>åŸºäºæ¨¡å‹é¢„æµ‹æœªæ¥ï¼Œé¿å…çŸ­è§†å†³ç­–<br><br>
                <strong>ğŸ›ï¸ çº¦æŸå¤„ç†ï¼š</strong>åœ¨ä¼˜åŒ–ä¸­ç›´æ¥å¤„ç†å„ç§ç‰©ç†é™åˆ¶<br><br>
                <strong>ğŸ¯ å¤šç›®æ ‡ä¼˜åŒ–ï¼š</strong>åŒæ—¶è€ƒè™‘æ€§èƒ½ã€å®‰å…¨ã€ç»æµç­‰å¤šé‡ç›®æ ‡<br><br>
                <strong>ğŸ”„ æ»šåŠ¨åé¦ˆï¼š</strong>æ¯ä¸ªå‘¨æœŸé‡æ–°ä¼˜åŒ–ï¼Œè‡ªåŠ¨å¤„ç†ä¸ç¡®å®šæ€§<br><br>
                <strong>ğŸšï¸ å¤šå˜é‡åè°ƒï¼š</strong>ç»Ÿä¸€å¤„ç†å¤šè¾“å…¥å¤šè¾“å‡ºç³»ç»Ÿ
            </div>
        </div>
        
        <div class="detail-section">
            <h3>ğŸš€ å®é™…åº”ç”¨é¢†åŸŸ</h3>
            
            <div class="grid-2">
                <div>
                    <h4>ğŸš— è‡ªåŠ¨é©¾é©¶</h4>
                    <p>è·¯å¾„è§„åˆ’ã€é¿éšœã€è½¦è¾†åè°ƒ</p>
                    
                    <h4>ğŸ­ å·¥ä¸šè¿‡ç¨‹</h4>
                    <p>åŒ–å·¥ååº”å™¨ã€ç²¾é¦å¡”ã€çƒ­å¤„ç†</p>
                    
                    <h4>ğŸ›°ï¸ èˆªç©ºèˆªå¤©</h4>
                    <p>é£è¡Œå™¨æ§åˆ¶ã€å«æ˜Ÿå§¿æ€æ§åˆ¶</p>
                </div>
                
                <div>
                    <h4>ğŸ¢ å»ºç­‘èŠ‚èƒ½</h4>
                    <p>HVACç³»ç»Ÿã€ç…§æ˜æ§åˆ¶ã€èƒ½æºç®¡ç†</p>
                    
                    <h4>ğŸ”‹ ç”µåŠ›ç³»ç»Ÿ</h4>
                    <p>å¾®ç”µç½‘ã€å‚¨èƒ½è°ƒåº¦ã€éœ€æ±‚å“åº”</p>
                    
                    <h4>ğŸ¤– æœºå™¨äºº</h4>
                    <p>è¿åŠ¨è§„åˆ’ã€åä½œæ§åˆ¶ã€çµå·§æ“ä½œ</p>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
