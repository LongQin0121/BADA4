# pyBADA - Base of Aircraft Data for Python

[![Python Version](https://img.shields.io/badge/python-3.8+-blue.svg)](https://python.org)
[![BADA Version](https://img.shields.io/badge/BADA-4.2-green.svg)](https://eurocontrol.int)
[![License](https://img.shields.io/badge/license-EUPL-orange.svg)](https://joinup.ec.europa.eu/collection/eupl)

**å®Œæ•´çš„EUROCONTROL BADA (Base of Aircraft Data) Pythonå®ç°ï¼Œç”¨äºé£æœºæ€§èƒ½å»ºæ¨¡ã€è½¨è¿¹é¢„æµ‹å’Œä¼˜åŒ–ã€‚**

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å®‰è£…è¦æ±‚

```bash
# Pythonç¯å¢ƒ
python >= 3.8
pandas >= 1.0.0
numpy >= 1.18.0
xml.etree.ElementTree (æ ‡å‡†åº“)

# å®‰è£…pyBADA
pip install pyBADA
```

### æ•°æ®æ–‡ä»¶é…ç½®

âš ï¸ **é‡è¦**: pyBADAéœ€è¦EUROCONTROLçš„BADAæ•°æ®æ–‡ä»¶æ‰èƒ½æ­£å¸¸å·¥ä½œã€‚

```bash
# 1. ä»EUROCONTROLè·å–BADAæ•°æ®æ–‡ä»¶
# BADA4.2: https://amelia.upc.edu:31416/sharing/5qXZ46B5H
# BADA3.15: https://amelia.upc.edu:31416/sharing/q8f50KNyP

# 2. è§£å‹å¹¶å®‰è£…æ•°æ®æ–‡ä»¶
7z x BADA_4.2_L06514UPC.7z -o/tmp/bada_main
unzip BADA_4.2_Release_files.zip -d /tmp/bada_release

# 3. å¤åˆ¶åˆ°pyBADAç›®å½•
cp -r /tmp/bada_main/* /path/to/site-packages/pyBADA/aircraft/BADA4/
```

## ğŸ“– åŸºæœ¬ä½¿ç”¨

### å¯¼å…¥æ¨¡å—

```python
from pyBADA.bada4 import BADA4, Airplane, Parser
from pyBADA.aircraft import Bada
import pandas as pd
```

### æ ¸å¿ƒä½¿ç”¨æ¨¡å¼

#### æ–¹æ³•1: Airplane + BADA4 å¯¹è±¡ â­â­â­â­â­

```python
# åˆ›å»ºé£æœºå¯¹è±¡
airplane = Airplane()                    # æ— å‚æ•°æ„é€ 
airplane.aircraft_type = 'B738W26'       # è®¾ç½®é£æœºä»£ç 
airplane.code = 'B738W26'

# åˆ›å»ºBADA4è®¡ç®—å¯¹è±¡
bada4 = BADA4(airplane)                  # ä¼ å…¥airplaneå¯¹è±¡

# å¯ç”¨çš„è®¡ç®—æ–¹æ³• (28ä¸ª)
methods = ['CD', 'CL', 'CF', 'CT', 'D', 'L', 'GS', 'CP', 'CLmax', ...]

# ç¤ºä¾‹è®¡ç®—
drag_coeff = bada4.CD(HLid=0, LG=0, CL=0.5, M=0.78)
lift_coeff = bada4.CL(delta=1.0, mass=70000, M=0.78)
fuel_flow = bada4.CF(delta=1.0, theta=1.0, DeltaTemp=0)
```

#### æ–¹æ³•2: ç›´æ¥XMLè§£æ â­â­â­â­â­

```python
import xml.etree.ElementTree as ET

# è§£æç‰¹å®šé£æœºçš„XMLæ–‡ä»¶
aircraft_code = 'B738W26'
xml_path = f"/path/to/pyBADA/aircraft/BADA4/Models/{aircraft_code}/{aircraft_code}.xml"

tree = ET.parse(xml_path)
root = tree.getroot()

# æå–å‚æ•°
parameters = {}
for elem in root.iter():
    if elem.text and elem.text.strip():
        try:
            parameters[elem.tag.split('}')[-1]] = float(elem.text.strip())
        except ValueError:
            parameters[elem.tag.split('}')[-1]] = elem.text.strip()
```

#### æ–¹æ³•3: Parserç±»è§£æ

```python
# åˆ›å»ºè§£æå™¨
parser = Parser()

# å¯ç”¨æ–¹æ³•
parser.parseXML(xml_path, aircraft_name)      # è§£æå•ä¸ªXML
parser.parseAll(directory, aircraft_name)     # è§£æç›®å½•
parser.parseGPF(gpf_path, aircraft_name)      # è§£æå…¨å±€æ€§èƒ½æ–‡ä»¶
```

## âœˆï¸ æ”¯æŒçš„é£æœºå‹å·

### Boeing ç³»åˆ— (å…±31ä¸ªå‹å·)
```python
boeing_aircraft = [
    # 737 ç³»åˆ—
    'B73215', 'B73320', 'B73423', 'B73518', 'B73622',
    'B737W24', 'B738W26', 'B739ERW26',
    
    # 747 ç³»åˆ—  
    'B742RR', 'B743PW', 'B744ERGE', 'B744GE', 'B748F',
    
    # 757/767 ç³»åˆ—
    'B752WRR40', 'B753RR', 'B762ERPW56', 'B762GE50', 
    'B763ERGE61', 'B763PW60', 'B764ER',
    
    # 777 ç³»åˆ—
    'B772LR', 'B772RR92', 'B773ERGE115B', 'B773RR92',
    
    # 787 ç³»åˆ—
    'B788GE67', 'B788GE70', 'B788RR53', 'B788RR64', 
    'B788RR67', 'B788RR70', 'B789GE75', 'B789RR64', 'B789RR74'
]
```

### Airbus ç³»åˆ— (å…±32ä¸ªå‹å·)
```python
airbus_aircraft = [
    # A300/A310 ç³»åˆ—
    'A300B4-203', 'A300B4-601', 'A300B4-608ST', 'A300B4-622',
    'A310-204', 'A310-222', 'A310-308', 'A310-322', 'A310-324',
    
    # A320 ç³»åˆ—
    'A318-112', 'A319-114', 'A319-131', 
    'A320-212', 'A320-214', 'A320-231', 'A320-232',
    'A321-111', 'A321-131',
    
    # A330 ç³»åˆ—
    'A330-203', 'A330-223', 'A330-243', 'A330-301', 'A330-321', 'A330-341',
    
    # A340 ç³»åˆ—
    'A340-213', 'A340-313', 'A340-541', 'A340-642',
    
    # A350/A380 ç³»åˆ—
    'A350-941', 'A380-841', 'A380-861'
]
```

### å…¶ä»–åˆ¶é€ å•† (å…±41ä¸ªå‹å·)
```python
other_aircraft = [
    # ATRç³»åˆ—
    'ATR42-300', 'ATR42-320', 'ATR42-400', 'ATR42-500',
    'ATR72-200', 'ATR72-210', 'ATR72-500', 'ATR72-600',
    
    # Embraerç³»åˆ—  
    'EMB-135ER', 'EMB-145ER', 'EMB-170AR', 'EMB-175LR', 
    'EMB-190STD', 'EMB-195AR', 'EMB-500', 'EMB-505',
    
    # Fokkerç³»åˆ—
    'F70-620', 'F100-620', 'F100-650',
    
    # McDonnell Douglasç³»åˆ—
    'MD808120', 'MD808221', 'MD808321', 'MD808720', 'MD808821'
]
```

## ğŸ“Š å‚æ•°è¯´æ˜

### Boeing 737-800 (B738W26) å‚æ•°ç¤ºä¾‹

```python
# åŸºæœ¬ä¿¡æ¯
aircraft_info = {
    'icao_code': 'B738',
    'name': 'Boeing 737-800',
    'engine': 'CFM56-7B26/27',
    'wtc': 'M'  # Medium
}

# å‡ ä½•å‚æ•°
geometry = {
    'length': 39.47,        # æœºèº«é•¿åº¦ (m)
    'wingspan': 34.32,      # ç¿¼å±• (m) [ä¼°ç®—]
    'wing_area': 124.58,    # ç¿¼é¢ç§¯ (mÂ²)
    'height': 12.5          # æœºèº«é«˜åº¦ (m) [ä¼°ç®—]
}

# é‡é‡å‚æ•°
mass = {
    'mtow': 79016,          # æœ€å¤§èµ·é£é‡é‡ (kg)
    'mlw': 66361,           # æœ€å¤§ç€é™†é‡é‡ (kg)
    'mzfw': 62732           # æœ€å¤§é›¶ç‡ƒæ²¹é‡é‡ (kg)
}

# æ€§èƒ½å‚æ•°
performance = {
    'v_fe': 162,            # è¥Ÿç¿¼æé™é€Ÿåº¦ (kt)
    'mach_max': 0.82,       # æœ€å¤§é©¬èµ«æ•°
    'cas_descent': 290,     # ä¸‹é™æŒ‡ç¤ºç©ºé€Ÿ (kt)
    'mach_descent': 0.78    # ä¸‹é™é©¬èµ«æ•°
}

# è·‘é“æ€§èƒ½
runway = {
    'tol': 2200,            # èµ·é£è·ç¦» (m)
    'ldl': 1500             # ç€é™†è·ç¦» (m)
}
```

## ğŸ§® BADA4è®¡ç®—æ–¹æ³•

### ç©ºæ°”åŠ¨åŠ›å­¦è®¡ç®—

```python
# é˜»åŠ›ç³»æ•°è®¡ç®—
CD = bada4.CD(HLid, LG, CL, M)
# å‚æ•°:
# HLid: é«˜å‡åŠ›è£…ç½®ID (0=æ”¶èµ·, 1-7=ä¸åŒè¥Ÿç¿¼ä½ç½®)
# LG: èµ·è½æ¶çŠ¶æ€ (0=æ”¶èµ·, 1=æ”¾ä¸‹)  
# CL: å‡åŠ›ç³»æ•°
# M: é©¬èµ«æ•°

# å‡åŠ›ç³»æ•°è®¡ç®—
CL = bada4.CL(delta, mass, M)
# å‚æ•°:
# delta: å¤§æ°”å¯†åº¦æ¯” (Ï/Ïâ‚€)
# mass: é£æœºè´¨é‡ (kg)
# M: é©¬èµ«æ•°

# æœ€å¤§å‡åŠ›ç³»æ•°
CLmax = bada4.CLmax(HLid, LG, M)
```

### æ¨åŠ›å’Œç‡ƒæ²¹è®¡ç®—

```python
# ç‡ƒæ²¹æµé‡ç³»æ•°
CF = bada4.CF(delta, theta, DeltaTemp)
# å‚æ•°:
# delta: å¤§æ°”å¯†åº¦æ¯”
# theta: å¤§æ°”æ¸©åº¦æ¯” (T/Tâ‚€)
# DeltaTemp: æ¸©åº¦åå·® (K)

# æ¨åŠ›ç³»æ•°
CT = bada4.CT(...)  # éœ€è¦æ›´å¤šå‚æ•°

# æ…¢è½¦æ¨åŠ›ç‡ƒæ²¹æµé‡
CF_idle = bada4.CF_idle(delta, theta)
```

### é£è¡ŒåŒ…çº¿è®¡ç®—

```python
# åœ°é€Ÿè®¡ç®—
GS = bada4.GS(TAS, wind_speed, wind_direction, track)

# é˜»åŠ›è®¡ç®—
D = bada4.D(CD, S, rho, TAS)

# å‡åŠ›è®¡ç®—  
L = bada4.L(CL, S, rho, TAS)
```

## ğŸ”§ å®ç”¨ç¤ºä¾‹

### å®Œæ•´çš„é£æœºå‚æ•°è·å–å™¨

```python
class AircraftDataExtractor:
    def __init__(self, aircraft_code):
        self.aircraft_code = aircraft_code
        self.airplane = Airplane()
        self.airplane.aircraft_type = aircraft_code
        self.bada4 = BADA4(self.airplane)
        
    def get_all_parameters(self):
        # XMLå‚æ•°æå–
        xml_params = self.extract_xml_params()
        
        # BADA4å¯¹è±¡ä¿¡æ¯
        bada4_info = {
            'methods_count': len([m for m in dir(self.bada4) if not m.startswith('_')]),
            'available_methods': [m for m in dir(self.bada4) if not m.startswith('_')][:10]
        }
        
        return {
            'aircraft_code': self.aircraft_code,
            'xml_parameters': xml_params,
            'bada4_info': bada4_info
        }
    
    def extract_xml_params(self):
        import xml.etree.ElementTree as ET
        xml_path = f"/path/to/BADA4/Models/{self.aircraft_code}/{self.aircraft_code}.xml"
        
        try:
            tree = ET.parse(xml_path)
            root = tree.getroot()
            
            params = {}
            for elem in root.iter():
                if elem.text and elem.text.strip() and len(elem.text.strip()) < 100:
                    tag = elem.tag.split('}')[-1]  # å»é™¤å‘½åç©ºé—´
                    try:
                        params[tag] = float(elem.text.strip())
                    except ValueError:
                        params[tag] = elem.text.strip()
            
            return params
        except Exception as e:
            return {'error': str(e)}

# ä½¿ç”¨ç¤ºä¾‹
extractor = AircraftDataExtractor('B738W26')
all_data = extractor.get_all_parameters()
print(f"æå–åˆ° {len(all_data['xml_parameters'])} ä¸ªå‚æ•°")
```

### æ€§èƒ½è®¡ç®—ç¤ºä¾‹

```python
def calculate_cruise_performance(aircraft_code, altitude_ft=35000, mach=0.78):
    """è®¡ç®—å·¡èˆªæ€§èƒ½"""
    
    # åˆå§‹åŒ–
    airplane = Airplane()
    airplane.aircraft_type = aircraft_code
    bada4 = BADA4(airplane)
    
    # å¤§æ°”å‚æ•°è®¡ç®— (ISAæ ‡å‡†å¤§æ°”)
    altitude_m = altitude_ft * 0.3048
    delta = (1 - 0.0065 * altitude_m / 288.15) ** 5.256  # å¯†åº¦æ¯”
    theta = (1 - 0.0065 * altitude_m / 288.15)           # æ¸©åº¦æ¯”
    
    try:
        # å‡è®¾è´¨é‡ä¸ºMTOWçš„80%
        mass = 79016 * 0.8  # Boeing 737-800
        
        # è®¡ç®—å‡åŠ›ç³»æ•° (ç®€åŒ–)
        rho = 1.225 * delta  # å¯†åº¦
        v_tas = mach * 340 * (theta ** 0.5)  # çœŸç©ºé€Ÿ
        S = 124.58  # ç¿¼é¢ç§¯
        
        CL = (mass * 9.81) / (0.5 * rho * v_tas**2 * S)
        
        # è®¡ç®—é˜»åŠ›ç³»æ•°
        CD = bada4.CD(HLid=0, LG=0, CL=CL, M=mach)
        
        # è®¡ç®—ç‡ƒæ²¹æµé‡
        CF = bada4.CF(delta=delta, theta=theta, DeltaTemp=0)
        
        return {
            'altitude_ft': altitude_ft,
            'mach': mach,
            'lift_coefficient': CL,
            'drag_coefficient': CD,
            'fuel_flow_coefficient': CF,
            'true_airspeed_ms': v_tas,
            'mass_kg': mass
        }
        
    except Exception as e:
        return {'error': str(e)}

# ä½¿ç”¨ç¤ºä¾‹
performance = calculate_cruise_performance('B738W26')
print(performance)
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
pyBADA/
â”œâ”€â”€ aircraft/
â”‚   â”œâ”€â”€ BADA3/          # BADA 3.x æ•°æ®æ–‡ä»¶
â”‚   â”œâ”€â”€ BADA4/          # BADA 4.x æ•°æ®æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ Models/     # é£æœºå‹å·æ•°æ®
â”‚   â”‚   â”‚   â”œâ”€â”€ B738W26/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ B738W26.xml
â”‚   â”‚   â”‚   â”œâ”€â”€ A320-212/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ A320-212.xml
â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â”œâ”€â”€ GPF.xml     # å…¨å±€æ€§èƒ½æ–‡ä»¶
â”‚   â”‚   â””â”€â”€ release.csv # å‘å¸ƒä¿¡æ¯
â”‚   â””â”€â”€ BADAH/          # ç›´å‡æœºæ•°æ®
â”œâ”€â”€ bada3.py            # BADA3 æ¨¡å—
â”œâ”€â”€ bada4.py            # BADA4 æ¨¡å— â­
â”œâ”€â”€ aircraft.py         # é£æœºåŸºç¡€ç±» â­
â””â”€â”€ ...
```

## ğŸ› ï¸ æ•…éšœæ’é™¤

### å¸¸è§é”™è¯¯åŠè§£å†³æ–¹æ¡ˆ

#### 1. æ•°æ®æ–‡ä»¶ç¼ºå¤±
```
é”™è¯¯: DUMMYæ–‡ä»¶æˆ–ç©ºç›®å½•
è§£å†³: ç¡®ä¿å·²æ­£ç¡®å®‰è£…BADAæ•°æ®æ–‡ä»¶
```

#### 2. APIè°ƒç”¨é”™è¯¯
```python
# âŒ é”™è¯¯æ–¹å¼
airplane = Airplane('B738W26')  # ä¼šæŠ¥é”™

# âœ… æ­£ç¡®æ–¹å¼  
airplane = Airplane()
airplane.aircraft_type = 'B738W26'
bada4 = BADA4(airplane)
```

#### 3. è®¡ç®—æ–¹æ³•å‚æ•°é”™è¯¯
```python
# âŒ é”™è¯¯è°ƒç”¨
CD = bada4.CD()  # ç¼ºå°‘å¿…éœ€å‚æ•°

# âœ… æ­£ç¡®è°ƒç”¨
CD = bada4.CD(HLid=0, LG=0, CL=0.5, M=0.78)
```

#### 4. XMLè§£æå¤±è´¥
```python
# æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨
from pathlib import Path
xml_path = f"/path/to/Models/{aircraft_code}/{aircraft_code}.xml"
if not Path(xml_path).exists():
    print(f"æ–‡ä»¶ä¸å­˜åœ¨: {xml_path}")
```

### è¯Šæ–­è„šæœ¬

```python
def diagnose_pybada():
    """è¯Šæ–­pyBADAå®‰è£…å’Œé…ç½®"""
    
    print("ğŸ” pyBADAè¯Šæ–­")
    print("-" * 40)
    
    # æ£€æŸ¥å¯¼å…¥
    try:
        from pyBADA.bada4 import BADA4, Airplane, Parser
        print("âœ… æ¨¡å—å¯¼å…¥æˆåŠŸ")
    except ImportError as e:
        print(f"âŒ æ¨¡å—å¯¼å…¥å¤±è´¥: {e}")
        return
    
    # æ£€æŸ¥æ•°æ®æ–‡ä»¶
    bada4_path = "/path/to/pyBADA/aircraft/BADA4"
    models_path = f"{bada4_path}/Models"
    
    if Path(models_path).exists():
        aircraft_count = len([d for d in Path(models_path).iterdir() if d.is_dir()])
        print(f"âœ… æ‰¾åˆ° {aircraft_count} ä¸ªé£æœºå‹å·")
    else:
        print("âŒ Modelsç›®å½•ä¸å­˜åœ¨")
        return
    
    # æµ‹è¯•åŸºæœ¬åŠŸèƒ½
    try:
        airplane = Airplane()
        airplane.aircraft_type = 'B738W26'
        bada4 = BADA4(airplane)
        method_count = len([m for m in dir(bada4) if not m.startswith('_')])
        print(f"âœ… BADA4å¯¹è±¡åˆ›å»ºæˆåŠŸï¼Œ{method_count}ä¸ªæ–¹æ³•å¯ç”¨")
    except Exception as e:
        print(f"âŒ BADA4æµ‹è¯•å¤±è´¥: {e}")
    
    print("âœ… è¯Šæ–­å®Œæˆ")

# è¿è¡Œè¯Šæ–­
diagnose_pybada()
```

## ğŸ“š å‚è€ƒèµ„æº

### å®˜æ–¹èµ„æº
- **EUROCONTROL BADA**: https://www.eurocontrol.int/model/bada
- **GitHubä»“åº“**: https://github.com/eurocontrol-bada/pybada
- **BADAç”¨æˆ·æ‰‹å†Œ**: éšæ•°æ®åŒ…æä¾›

### å­¦æœ¯æ–‡çŒ®
- BADA 4.0 Model Specification
- Aircraft Performance Modelling with BADA
- pyBADA: Easy BADA integration in Python

### æ•°æ®æ ¼å¼å‚è€ƒ
- **XML Schema**: ACM_BADA4.xsd, GPF_BADA4.xsd
- **å‚æ•°å®šä¹‰**: BADA User Manual Section 3
- **å•ä½è¯´æ˜**: SIå•ä½åˆ¶ (kg, m, s, K)

## ğŸ“ è®¸å¯åè®®

pyBADAåœ¨æ¬§ç›Ÿå…¬å…±è®¸å¯è¯ v1.2 (EUPL-1.2) ä¸‹å‘å¸ƒã€‚

BADAæ•°æ®å—EUROCONTROLç‰ˆæƒä¿æŠ¤ï¼Œä½¿ç”¨éœ€è¦è®¸å¯åè®®ã€‚

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤Issueå’ŒPull Requeståˆ°å®˜æ–¹GitHubä»“åº“ã€‚

## ğŸ“ æ”¯æŒ

- **GitHub Issues**: æŠ€æœ¯é—®é¢˜å’ŒbugæŠ¥å‘Š
- **EUROCONTROL**: BADAæ•°æ®ç›¸å…³é—®é¢˜
- **ç¤¾åŒºè®ºå›**: ç”¨æˆ·ç»éªŒåˆ†äº«

---

**ç‰ˆæœ¬**: åŸºäº pyBADA 0.1.5 å’Œ BADA 4.2  
**æ›´æ–°æ—¶é—´**: 2025å¹´8æœˆ  
**é€‚ç”¨äº**: Python 3.8+ ç¯å¢ƒ

## ğŸ“š å‚è€ƒèµ„æº

- **å®˜æ–¹GitHub**: https://github.com/eurocontrol-bada/pybada
- **BADAç”¨æˆ·æ‰‹å†Œ**: EUROCONTROLå®˜ç½‘
- **æ•°æ®ä½ç½®**: `/home/longqin/anaconda3/envs/atc_sim/lib/python3.12/site-packages/pyBADA/aircraft/BADA4`
- **æ”¯æŒçš„é£æœº**: 104ç§ä¸åŒå‹å·

---

*è¿™ä»½æ–‡æ¡£åŸºäºpyBADA 0.1.5ç‰ˆæœ¬å’ŒBADA 4.2æ•°æ®é›†ç¼–å†™*